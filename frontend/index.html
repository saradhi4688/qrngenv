<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quantum RNG — Frontend</title>

  <!-- Custom Quantum Theme -->
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">

  <!-- External Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

  <!-- Quantum Background Animation -->
  <script src="quantum-bg.js"></script>
</head>
<body>
  <!-- Quantum Background Container -->
  <div id="quantum-bg"></div>

  <!-- Header -->
  <header>
    <h1>⚛️ Quantum RNG</h1>
    <p>Generate true random numbers using quantum mechanics</p>
  </header>

  <!-- Main Container -->
  <div class="container">
    <!-- Control Panel -->
    <div class="control-panel">
      <h2>🎛️ Controls</h2>

      <!-- Backend URL -->
      <div class="input-group">
        <label for="baseUrl">Backend Base URL</label>
        <input id="baseUrl" type="url" value="https://qrngenvbackend.onrender.com" 
               placeholder="http://localhost:5000" />
        <button id="pingBtn" class="quantum-btn" style="margin-top: 0.5rem; padding: 0.5rem;">
          Ping Backend
        </button>
        <p id="pingStatus" class="hidden" style="margin-top: 0.5rem; font-size: 0.9rem;"></p>
      </div>

      <!-- Controls Grid -->
      <div class="input-group">
        <label for="numBits">Bits per number (1–16)</label>
        <input id="numBits" type="number" min="1" max="16" value="8" />
      </div>

      <div class="input-group">
        <label for="numSamples">How many samples (1–1000)</label>
        <input id="numSamples" type="number" min="1" max="1000" value="50" />
      </div>

      <!-- Generate Button -->
      <button id="genBtn" class="quantum-btn">🌌 Generate Quantum Numbers</button>

      <!-- Clear Button -->
      <button id="clearBtn" class="quantum-btn" 
              style="margin-top: 1rem; background: linear-gradient(45deg, var(--secondary-color), var(--accent-color));">
        Clear Results
      </button>

      <!-- Error Display -->
      <div id="errorBox" class="hidden" style="margin-top: 1rem; padding: 1rem; background: var(--secondary-color); border-radius: 8px; color: white;"></div>

      <!-- Source Badge -->
      <div id="sourceBadge" class="hidden" style="margin-top: 1rem;">
        <span style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; 
                     background: var(--bg-card); border: 1px solid var(--border-color); 
                     border-radius: 20px; font-size: 0.9rem;">
          <span id="sourceDot" style="width: 8px; height: 8px; border-radius: 50%; background: var(--success-color);"></span>
          <span id="sourceText">Source: ANU</span>
        </span>
      </div>
    </div>

    <!-- Results Panel -->
    <div class="results-panel">
      <!-- Stats Card -->
      <div id="statsCard" class="hidden">
        <h3>📊 Statistics</h3>
        <div class="stats-grid">
          <div class="stat">
            <span class="stat-label">Mean:</span>
            <span id="statMean">—</span>
          </div>
          <div class="stat">
            <span class="stat-label">Std Dev:</span>
            <span id="statStd">—</span>
          </div>
          <div class="stat">
            <span class="stat-label">Min:</span>
            <span id="statMin">—</span>
          </div>
          <div class="stat">
            <span class="stat-label">Max:</span>
            <span id="statMax">—</span>
          </div>
          <div class="stat">
            <span class="stat-label">Range:</span>
            <span id="statRange">—</span>
          </div>
        </div>

        <!-- Download Controls -->
        <div style="margin-top: 1.5rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
          <button id="downloadJson" class="quantum-btn" style="flex: 1; font-size: 0.9rem; padding: 0.5rem;">
            📄 JSON
          </button>
          <button id="downloadCsv" class="quantum-btn" style="flex: 1; font-size: 0.9rem; padding: 0.5rem;">
            📊 CSV
          </button>
          <button id="copyCurl" class="quantum-btn" style="flex: 1; font-size: 0.9rem; padding: 0.5rem;">
            📋 cURL
          </button>
        </div>
      </div>

      <!-- Chart Card -->
      <div id="chartCard" class="hidden">
        <h3>📈 Distribution</h3>
        <canvas id="histogram" style="max-height: 300px;"></canvas>
      </div>

      <!-- Table Card -->
      <div id="tableCard" class="hidden">
        <h3>📋 Generated Numbers</h3>
        <div style="max-height: 400px; overflow-y: auto; margin-top: 1rem;">
          <table style="width: 100%; font-family: 'Courier New', monospace; font-size: 0.9rem;">
            <thead>
              <tr style="text-align: left; border-bottom: 1px solid var(--border-color);">
                <th style="padding: 0.5rem;">#</th>
                <th style="padding: 0.5rem;">Decimal</th>
                <th style="padding: 0.5rem;">Binary</th>
              </tr>
            </thead>
            <tbody id="numbersBody"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Info Section -->
  <div class="info-section">
    <h3>🔬 How Quantum Random Numbers Work</h3>
    <div class="info-grid">
      <div class="info-card">
        <h4>⚛️ Quantum Source</h4>
        <p>Uses quantum mechanical processes like photon detection or atomic decay that are fundamentally random.</p>
      </div>
      <div class="info-card">
        <h4>🎲 True Randomness</h4>
        <p>Unlike computer algorithms, quantum randomness cannot be predicted or reproduced.</p>
      </div>
      <div class="info-card">
        <h4>🔒 Cryptographic Grade</h4>
        <p>Suitable for security applications requiring the highest quality random numbers.</p>
      </div>
      <div class="info-card">
        <h4>🌌 Quantum Mechanics</h4>
        <p>Based on the fundamental uncertainty principle - nature's built-in randomness.</p>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <p>Powered by quantum mechanics and the uncertainty principle</p>
    <p style="margin-top: 0.5rem; font-size: 0.9rem;">
      <button id="toggleTheme" style="background: none; border: 1px solid var(--primary-color); 
                                    color: var(--primary-color); padding: 0.25rem 0.5rem; 
                                    border-radius: 4px; cursor: pointer;">
        🌙 Toggle Theme
      </button>
      <button id="openInfo" style="background: none; border: 1px solid var(--primary-color); 
                                  color: var(--primary-color); padding: 0.25rem 0.5rem; 
                                  border-radius: 4px; cursor: pointer; margin-left: 0.5rem;">
        ℹ️ API Info
      </button>
    </p>
  </footer>

  <!-- Info Modal -->
  <div id="infoModal" class="hidden" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                                           background: rgba(0,0,0,0.8); z-index: 1000; 
                                           display: flex; align-items: center; justify-content: center;">
    <div style="background: var(--bg-card); border: 1px solid var(--border-color); 
                border-radius: 15px; padding: 2rem; max-width: 600px; max-height: 80vh; 
                overflow-y: auto; margin: 1rem;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
        <h3 style="color: var(--primary-color);">ℹ️ API Information</h3>
        <button id="closeInfo" class="quantum-btn" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
          Close
        </button>
      </div>
      <pre id="infoContent" style="background: var(--bg-dark); border: 1px solid var(--border-color); 
                                  border-radius: 8px; padding: 1rem; overflow-x: auto; 
                                  white-space: pre-wrap; font-size: 0.8rem;"></pre>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="hidden" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                                                 background: rgba(0,0,0,0.8); display: flex; 
                                                 align-items: center; justify-content: center; z-index: 1000;">
    <div style="text-align: center;">
      <div class="quantum-loader"></div>
      <p style="color: var(--text-light); margin-top: 1rem; font-weight: 600;">Generating quantum randomness…</p>
    </div>
  </div>

  <!-- Main JavaScript -->
  <script src="./assets/app.js"></script>
</body>
</html>
